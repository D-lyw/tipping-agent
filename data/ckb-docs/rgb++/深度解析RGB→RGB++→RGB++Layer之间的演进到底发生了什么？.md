# 深度解析RGB→RGB++→RGB++Layer之间的演进到底发生了什么？

RGB++协议近日完成了 RGB++ Layer 升级，可以将无桥跨链和智能合约扩展到 BCH、BSV、Dogecoin 这些所有 UTXO 链，并支持 Runes、BRC20 等其他 Layer 1 资产协议，RGB++ Layer 的首个 DEX UTXOSwap 也同步上线主网，根据计划后续生态还会继续推出单独的浏览器、IBO 等平台，再来聊聊 RGB++以及这轮牛市的大黑马 CKB 吧，探讨 RGB++与 RGB 之间的关系，以及为什么要将 RGB++升级为 RGB++ Layer。
  
首先要了解 RGB 和 RGB++的区别，RGB 的创始人是美国国家科学院博士 [Maxim Orlovsky](https://x.com/dr_orlovsky)，也是非营利比特币发展组织 LNP/BP 协会的技术委员会老大，而 RGB++的创始人是 CKB 的联合创始人 [Cipher](https://x.com/crypcipher)。

RGB 的定义是为比特币和闪电网络提供一套可扩展的智能合约系统，通过 UTXO 结合客户端验证的方式完成链下扩容，这也意味着所有数据都保存在比特币交易之外。其核心思想是仅在必要的时候调用比特币区块链，所有 Token 的转移有效验证全部从共识层移出到链下，并只由这条交易相关的收款方客户端进行验证，所以客户端验证与我们所熟悉的一条交易要全网广播不同，而是通过只让和特定交易有关系的部分节点参与到工作中，从而完成该交易的有效性验证，这在一定程度上也加强了 RGB 协议的隐私性。

作为链下的客户端验证与链上比特币网络本身之处在于将原生的 UTXO 魔改创造出了「一次性密封条」概念用于智能合约的状态转换。根据比特币的规则每个 UTXO 只能被花费一次，所以可以巧妙的将它的特性利用作为一个密封条，在创建 UTXO 时相当于密封条上锁，在花费它的时候则密封条打开，RGB 则利用 UTXO 为任何拥有智能合约的一方提供了验证其唯一性的能力，尽管将数据存在链下但通过 UTXO 绑定在链上，换句话说 RGB 利用比特币原生脚本作为其所有权和访问权的安全性来源，其实读到这里会感觉与 Ordinals 协议很类似，都是在已经改无可改的比特币网络上去利用现有的东西物尽其用挖掘出更多意想不到功能的「奇技淫巧」过程。

所以 RGB 本身只是一种用于扩展比特币的客户端验证技术，不是一个网络也不是一条区块链，严格意义上 RGB 并不能称之为 BTC Layer2，但通过 RGB 可以赋予比特币一部分以太坊等智能合约所实现的能力，包括发 Token、NFT、Defi 甚至游戏等。

但尽管如此这一轮比特币生态爆火的 ARC20、BRC20 等资产发行协议都没有用 RGB 的链下客户端验证架构，主要在于其链下的业务逻辑很复杂工程量庞大，以及用户体验也难以理解，因为上文中说到的绑定 UTXO，即两个用户使用 RGB 协议转让资产的时候不是提供自己的比特币地址，而是自己比特币的 UTXO，每一个人给我的每一次转账都需要新创建一个 UTXO，以及之前提到的点对点客户端验证过程中的隐私优势在有的场景也变成了劣势，当某个场景存在超过 2 个以上角色或者需要第三方参与时，只有交易双方可见数据的限制就会导致需要再做大量额外的工作去实现对应的业务逻辑，反而降低了可组合性和扩展性。

RGB++则是一条真正的「链」，其思想依然沿用 RGB 的将链上和链下分别创造一个交易并进行绑定的思想，不同之处在于既然客户端验证的目的本质上是为了将更多比特币网络无法存储的数据和无法实现的智能合约移到链下，并创建对应的交易与链上进行绑定，那为什么不直接用一个现成的图灵完备的 UTXO 链来「打包」替代掉客户端验证在做的事情，去和比特币这样一个图灵不完备的 UTXO 链相结合绑定呢？与其他 EVM 系 BTC Layer2 不同，因为都使用 UTXO 模型所以可以使得这两条链的 UXTO 进行一一绑定，我们将这个链称之为比特币的影子链，这样每移动一个比特币 UTXO，影子链的 UTXO 也同步进行移动，从而通过这样的方式实现比特币链的图灵完备性，RGB++也称其为同构绑定。

而 CKB 作为一条图灵完备的 UTXO 链自然也就成为比特币的影子链，所有 RGB++的交易都会同时在比特币和 CKB 上同步出现一笔交易，CKB 取代了客户端验证的流程，用户只需要检查 CKB 上的相关交易就可以验证这笔 RGB++的状态计算是否正确，从而极大的简化了客户端验证的工作。资产所有权依然由比特币主链的 UTXO 持有，CKB 影子链则存储资产状态、智能合约等信息，所以也依然继续沿用比特币的安全性。并且因为 CKB 本身也是一条公链，无需像 RGB 客户端验证那样用户每次转账都需要提供新的 UTXO 地址，而是可以直接提供自己独立的钱包地址，也提高了用户体验。

![](https://image.blockbeats.cn/file_v6/20240718/0b0a006a-8970-45df-9d77-c4a8c1ad709e.png?x-oss-process=image/quality,q_50/format,webp)

而这一次 RGB++ Layer 的升级则是将比特币与 CKB 之间的关系扩展到所有 UTXO 链，即之前是 CKB 使用 RGB++协议作为比特币的影子链，而现在 RGB++协议单独抽象独立出来作为一层，可以与所有 UTXO 链相结合，打造成一个通用的、可跨链互操作的 UTXO 中间层，不再只是将 CKB 作为 RGB++的索引器，可以将任意图灵完备的 UTXO 链作为其索引器，此外 BTC、CKB、BSV、BCH 等任何 UTXO 链的资产都可以进入 RGB++生态，将各类铭文、符文等资产都可以变为 RGB++ Layer 上的资产。以及这里有个误区，即不只是比特币及其生态才会使用 UTXO 模型，如以太坊的执行层模块化 Layer2 Fuel 也是使用的 UTXO，老牌 Layer1 公链 Cardano 也是 UTXO，这些都可以进入 RGB++生态。

因为传统的跨链桥是在主链上锁定或销毁掉资产并在子链上铸造出来对应数量的「假币」，然后在不跨回主链之前所有的资产交互全部都在子链完成，与主链无关，而 RGB++使用 UTXO 同构绑定的特点则是两条链的交互完全 1:1 进行，不存在「跨链」的说法，你在 Layer2 上的操作本来就会直接影响到 Layer1，所以且基于 UTXO 模型可以通过 RGB++ Layer 作为一个「无桥」的跨链桥，从而打通所有 UTXO 链的互操作性和资产流动性，资产内容丰富起来、流动性聚集后，将贫瘠的土壤变肥沃后，也就为后续更多比特币 Defi 玩法创建了前提条件。

![](https://image.blockbeats.cn/file_v6/20240718/6eb0bd48-6939-4c17-9d94-0a90505051ab.png?x-oss-process=image/quality,q_50/format,webp)

所以这次 RGB++ Layer 的升级的主要目的也是为了促进实现 Bitcoin Finance (BTCFi) 的发展，目前主要的用例包括 UTXOSwap 和 IBO 平台，UTXOSwap 会作为 RGB++ Layer 的核心枢纽用来聚合各种 UTXO 链的资产流动性，得益于 UTXO 的特性，其实现链下撮合链上验证的过程，从而可以在撮合阶段接入 AMM 之外的流动性提供者，未撮合的交易也无需支付 Gas 费，并且可以选择任意 Token 作为 Gas 支付。IBO 平台则是由 RGB++的第一个资产 Seal 的社区开发运营，也属于比特币生态的第一个 IBO 工具，针对整个 RGB++的 Launchpad。

除了将存量的 UTXO 链进入 RGB++外，一键发链平台 UTXO Stack（其创始人同样也是 RGB++创始人）可以发布 UTXO 架构的 BTC Layer2 并原生集成 RGB++协议能力，从而创造增量 UTXO 链进入 RGB++，UTXO Stack 也获得了 OKX、ABCDE、SNZ 等投资。

所以 RGB++ Layer2 目前在资产和公链层面都具备了导入存量、创建增量的能力，其带来的 BTCFi 应用场景值得关注。
