# 解读CKB版 “闪电网络” Fiber Network：比特币可编程性扩展的另一种思路

行业周期与宏观金融周期共振，加密行业正处在与 2019 年相似的整体性迷茫之中，现阶段不仅流动性枯竭，叙事貌似也在枯竭。市场不但对 VC 叙事兴趣阙如，对反 VC 的 Meme 叙事也已经疲倦。

就像每次哲学危机，人们都会回归柏拉图寻找出路，当加密行业危机时，我们也需要回归比特币、回归中本聪。

正如 CKB 生态 RGB++ 协议创始人 Cipher 在最新 Blog 里所阐述的，加密行业需要对以太坊 “链上计算” 的路径依赖进行反思，回归P2P经济学，让计算归于链下，让验证归于链上。

因此在比特币可编程性扩展方案的选择上，CKB 尊重比特币社区 “验证大于计算” 的共识，并没有复刻以太坊的 Rollup 方案和 Restaking+AVS 方案，而是致敬比特币闪电网络，推出了 CKB 版的闪电网络 Fiber Network（简称 CFN）。

CFN 的官方描述基于 CKB 和链外通道构成的下一代公共闪电网络。它实际用到技术堆栈主要有：CKB 的 Cell（一种支持图灵完备的 UTXO）、RGB++ 的同构绑定和 Leap 无桥跨链、比特币脚本的 HTLC（哈希时间锁）和闪电网络的状态通道等。

一个标准的 CFN 支付通道生命周期如下：

开启通道 - 锁定资产 - 创建 HTLC - 更新状态 - 验证交易 - 交易完成 - 关闭通道 - 提交最终状态

![图片](https://inews.gtimg.com/om_bt/OG0Xz_RguO4u_FBsKArqqU4O4xoltP2Elo9kbaKyPYBTwAA/641)

与比特币闪电网络相同，CFN 的通道可以一直保持活性，N 多一直保持活性的通道借助 “多跳” 机制，从而组成一个链下资产支付/清算网络。

但 CFN 并不是闪电网络 100% 的复制品，相比闪电网络，CFN 有以下几个关键的新特性：

多资产支持：不再局限于单一币种，为复杂的跨链金融应用铺平道路。可编程性：基于 CKB 的图灵完备智能合约，支持更复杂的条件执行和业务逻辑。跨链互操作性：原生设计支持与其他 UTXO 链（如 BTC）的闪电网络交互。更灵活的状态管理：得益于 CKB 的 Cell 模型，CFN 可以更高效地管理通道状态。

特别值得一提的是，CFN 为未来升级到更先进的支付通道技术（如 PTLC）预留了空间。这种前瞻性的设计使得 CFN 在技术演进上更具优势。

由于 CFN 和比特币闪电网络具有技术同构性（例如相同的哈希算法和时间锁脚本），两者之间天然具备实现跨链原子互换的基础。

![图片](https://inews.gtimg.com/om_bt/OizrwaBX-ptk_s_qQR-JyiRl9puvhEoi_BHbTHQTRDom0AA/641)

让我们通过一个具体的例子来理解这个过程：

Alice（CKB 端）想给 Bob（BTC 端）发送 100 个 CKB 等值的 BTCBob 生成一个秘密 S，并将其哈希 H(S) 给 AliceAlice 在 CFN 上创建 HTLC，锁定 100 CKB，条件是提供正确的 S同时，在 BTC 闪电网络上也创建相应的 HTLC，锁定等值 BTCBob 揭示 S 来认领 BTC，同时 S 也被中间环节的节点获得中间环节的节点使用S 在 CFN 上解锁了 Alice 的100 CKB

CFN 和闪电网络之间的原子跨链互换，不仅限于 BTC 和 CKB 两条链的原生资产，而且还支持 RGB++ 资产、Taproot 资产，例如生态第一个 Meme 币 Seal、比特币生态稳定币协议 Stable++ 的稳定币 RUSD 等。

同时，RGB++ 为 CFN 提供了丰富的资产类型。这大大扩展了 CFN 的应用场景，使其不再局限于简单的价值转移。

两者结合，可以实现 “比特币级别的安全性 + 以太坊级别的功能性 + 闪电网络级别的速度”。这是一个极具竞争力的组合。

围绕加密行业的三大商业模式的资产发行、借贷、交易，CFN 的潜在应用场景除了跨链支付之外有：

跨链流动性挖矿：为 CFN 支持的资产提供跨链流动性的用户可以获得奖励，刺激新资产发行和交易，例如基于 CFN 构建一个比特币生态的 meme 币发射平台。原子化跨链借贷：用户可以在 BTC 网络上锁定资产，在 CKB 网络上借出对应价值的稳定币，全程无需信任第三方。跨链 DEX：利用 CFN 可以构建一个去中心化交易所，支持 BTC、CKB 及各种 RGB++ 资产的快速、低成本交易。

如果以上潜在场景最终能够落地，比特币生态就可以借助 CFN 的跨链原子互换能力实现原生稳定币、原生借贷、原生 DEX 等 DeFi 应用。所以说，CFN 不只是 CKB 版的闪电网络，而是在比特币生态具有 Global 意义的可编程性扩展方案。

CFN 目前马上发布测试网，对于它未来的发展我们可以从以下几个指标观察：

与 BTC 闪电网络成功实现互操作的时间点；主网上线后的跨链交易量增长曲线；基于 CFN 开发的跨链DApp数量和质量；RGB++ 资产在 CFN 上的采用程度。

最后总结一下，在包括 Babylon、Merlin、BoB、Mezo 在内的众多比特币可编程性扩展方案中，CFN 是独树一帜的存在，它选择回归比特币闪电网络的经典范式而加以创新，从而拥有具有强大共识的比特币原生性和极高的可扩展性，有潜力在未来 BTCFi 的基础设施竞争中超越友商并最终胜出。
